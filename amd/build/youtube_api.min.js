define(["jquery"],function(a){return{init:function(b){function c(){if("undefined"==typeof YT||"undefined"==typeof YT.Player){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),window.onYouTubePlayerAPIReady=function(){a.each(h,function(a,b){d(b.videoid,b.ytparam,a)})}}else a.each(h,function(a,b){d(b.videoid,b.ytparam,a)})}function d(b,c,d){i[d]=new YT.Player("yt__"+d+"__"+b,{videoId:b,playerVars:c,events:{onStateChange:e,onError:f}}),a("#yt__baroverlay__"+d+"__"+b).click(function(){var a=this.id.split("__"),b=a[2],c=i[b].getPlayerState();c==YT.PlayerState.PLAYING?i[b].pauseVideo():i[b].playVideo()})}function e(c){var d=c.target.a.id,e=d.split("__"),f=e[2],j=e[1];a("#yt__statwrap__"+j+"__"+f).removeAttr("hidden"),a("#yt__restart__"+j+"__"+f).removeAttr("hidden"),a("#yt__restart__"+j+"__"+f).hide(),a("#yt__baroverlay__"+j+"__"+f).removeAttr("hidden"),a("#yt__baroverlay__"+j+"__"+f).hide(),c.data==YT.PlayerState.PLAYING?(h=g(f,"data-extern",j),b=h[j].ytparam,""!=b.end&&0!=b.end||delete b.end,(i[j].getCurrentTime()>b.end||i[j].getCurrentTime()<b.start)&&i[j].loadVideoById({videoId:f,startSeconds:b.start,endSeconds:b.end}),a("#"+d).show()):c.data==YT.PlayerState.ENDED?(a("#yt__play__"+j+"__"+f).hide(),a("#yt__restart__"+j+"__"+f).show(),a("#yt__statwrap__"+j+"__"+f).show(),a("#yt__baroverlay__"+j+"__"+f).hide(),a("#"+d).hide()):c.data==YT.PlayerState.PAUSED&&(a("#yt__baroverlay__"+j+"__"+f).show(),a("#yt__restart__"+j+"__"+f).hide(),a("#yt__statwrap__"+j+"__"+f).show())}function f(a){100==a.data&&console.log("Error - The video is not accessable!")}function g(b,c,d){var e=a.parseJSON(a("#yt__"+d+"__"+b).attr(c));return h[d]={},h[d].ytparam={},h[d].videoid=b,a.each(e,function(a,b){h[d].ytparam[a]=b}),h}var h={};a(".mbsyoutube-ytiframe").each(function(){var a=this.id.split("__"),b=a[2],c=a[1];h=g(b,"data-extern",c)}),a(document).ready(function(){c()});var i={};a(".mbsyoutube-yt-play").click(function(b){var c=b.target.id,d=c.split("__"),e=d[2],f=d[3];a("#yt__"+e+"__"+f).delay(200).fadeIn(400),i[e].playVideo()}),a(".mbsyoutube-yt-restart").click(function(c){var d=c.target.id,e=d.split("__"),f=e[2],j=e[3];a("#yt__"+f+"__"+j).delay(200).fadeIn(400),h=g(j,"data-extern",f),b=h[f].ytparam,i[f].loadVideoById({videoId:j,startSeconds:b.start,endSeconds:b.end})})}}});